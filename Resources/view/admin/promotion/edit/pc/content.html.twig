{% trans_default_domain 'page.products-promotion' %}

<div class="modal-dialog modal-dialog-centered " style="max-width: 850px;">

    {% if product %}

        {% set arr_property = product.getCategorySectionField()|json_decode %}

        {{ form_start(form) }}

        <div class="modal-content p-4 border-bottom border-5 border-primary">

            {# Заголовок модального окна #}
            {{ include(_self|replace({ "content.html.twig": "includes/header.html.twig" })) }}

            {# Табы #}
            <ul class="nav nav-pills gap-3 mb-3 mt-3" id="nav-product-promotion">

                <li class="nav-item" role="presentation">
                    <button class="btn fw-bolder nav-link active"
                            data-bs-toggle="tab"
                            type="button"
                            role="tab"
                            aria-selected="true"

                            id="tab_product_promotion-tab"
                            data-bs-target="#tab_product_promotion"
                            aria-controls="nav-product-promotion">

                        <small class="text-uppercase px-3">
                            Настройка цены
                        </small>
                    </button>
                </li>

            </ul>

            <div class="tab-content">
                <div class="tab-pane fade show active" id="tab_product_promotion" role="tabpanel">

                    <div class="alert alert-warning" role="alert">
                        <div class="d-flex align-items-baseline gap-3">

                            <div>
                                <div class="icon rounded-circle bg-contain p-2 bg-primary text-white"
                                     style="width: 10px; height: 10px;">
                                    <span class="small">!</span>
                                </div>
                            </div>

                            <div>
                                {{ 'price.label'|trans }} будет установлена
                                <span class="text-danger text-uppercase fw-bold ">{{ 'period.end'|trans }}</span>,
                                если не выбрать дату окончания
                            </div>

                        </div>

                    </div>

                    <div class="d-flex gap-3 justify-content-between">

                        {# Стоимость #}
                        {{ include(_self|replace({ "content.html.twig": "form/price.html.twig" })) }}

                        {# Период #}
                        {{ include(_self|replace({ "content.html.twig": "form/period.html.twig" })) }}

                    </div>

                </div>
            </div>

            {# Кнопки формы #}
            <div class="modal-footer ">
                <div class="flex-grow-1">
                    &nbsp;
                </div>

                <div class="mt-3 gap-3 d-flex">
                    {# Отмена #}
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                        {{ 'btn.cancel'|trans({}, 'core.btn') }}
                    </button>

                    {# Сохранить #}
                    {{ form_widget(form.product_promotion, { label:
                        '<span>'~ 'btn.save'|trans({}, 'core.btn') ~'</span>
                         <span class="spinner-border spinner-border-sm vertical-middle d-none"></span>'}) }}
                </div>
            </div>

        </div>

        {{ form_end(form) }}

    {% else %}

        <div class="modal-content p-3 border-bottom border-5 border-primary">

            <div class="modal-header">
                <h5 class="modal-title">
                    Ошибка товара
                </h5>
            </div>

            <div class="modal-body p-3">
                Данного товара не существует!
            </div>

            <div class="modal-footer ">
                <div class="mt-3 gap-3 d-flex">
                    {# Отмена #}
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                        {{ 'btn.cancel'|trans({}, 'core.btn') }}
                    </button>
                </div>
            </div>

        </div>

    {% endif %}

</div>

